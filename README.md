

### Установка на Windows

* Нужен python3.6.

* Установка `SpeechRecognition`:
```
pip install SpeechRecognition
```

[Документация](https://pypi.org/project/SpeechRecognition/).

* Установка `pocketsphinx`: можно скачать [здесь](https://pypi.org/project/pocketsphinx/#files).

* Скачивание обученной модели для русского языка на основе HMM: [здесь](https://sourceforge.net/projects/cmusphinx/files/Acoustic%20and%20Language%20Models/Russian/). 

Делаем так, чтобы получилась следующая иерархия файлов и каталогов:
```
pocketsphinx-data \
    ru-RU \
        acoustic-model \
            {model' files}
        language-model.lm.bin
        pronounciation-dictionary.dict
```
и подкладываем эти файлы в директорию: `...\AppData\Local\Programs\Python\Python36\Lib\site-packages\speech_recognition\pocketsphinx-data`.

* Установка `logmmse`.
```
pip install logmmse
```

[Документация](https://pypi.org/project/logmmse/).

* Варианты запуска:
```
python main.py --file={path\to\wav-file} denoise
python main.py --file={path\to\wav-file} recognize --type={google,sphinx} [--duration={duration}]
```

---

### Методы работы

* __Google.__ Используя библиотеку `SpeechRecognition`. Нет возможности обработать файлы, которые больше 5 минут. Для некоторых аудио не возвращается ни одного варианта текста.

* __Pocketsphinx.__ Используя библиотеки `SpeechRecognition` и `Pocketsphinx`. Работает локально и очень медленно.

---

### Примеры работы

|        | kaggle/early_short_stories_0001.wav |
|--------|-------------------------------------|
|Оригинал| За столицей мудрого царя Соломона шелестел по склонам холмов густой лес. С его опушки запутанные тропинки вели на поляну. |
|Google | за столицей Мудрого царя Соломона шелестел по склонам холмов густой лес с его опушке запутанные тропинке в Ильино поляна                                     |
|Sphinx | со столицей мудрого царя соломона шелестел по склонам холмов густой лес с его опушки запутанные тропинки вели на поляну |

|        | kaggle/early_short_stories_0002.wav |
|--------|-------------------------------------|
|Оригинал| Где происходили свидания Ариэля и Тамары. Ему было около 14 лет и ей тоже. |
|Google  | где происходили свидания Ариэль а это Мары ему было около 14 лет и ей то |
|Sphinx | где происходили свидания и карьере и тамара ему было около четырнадцати лет визитёр |

|        | kaggle/early_short_stories_0003.wav |
|--------|-------------------------------------|
|Оригинал| Но Ариэль был сыном знатного иерусалимца, одного из любимейших советников премудрого царя. |
|Google  | Ну Ариэль был сыном знатного Иерусалимская одного из любимейших советников премудрова Царя |
|Sphinx  | но арелет был сыном знатного ерусалим сам одного из любезнейший советников премудрого царя |

|        | kaggle/early_short_stories_0004.wav |
|--------|-------------------------------------|
|Оригинал| Его волосы были черны как ночь, а глаза - как уголь. А Тамара жила за городом, потому что её отцу-иноплеменнику. |
|Google  | его волосы были черны Как ночь А глаза как уголь а Тамара жила за городом потому что её отцу иноплеменников |
|Sphinx  | его волосы были черны как ночь глаза как у уголь а тамара жила за городом потому что её отцу иноплеменников |

|        | kaggle/early_short_stories_0005.wav |
|--------|-------------------------------------|
|Оригинал| Недозволялось обитать среди иудеев. Её мягкие длинные локоны были нежного тёмно-каштанового цвета. |
|Google  | не дозволялось обитать среди иудеев её мягкие длинные локоны были нежного темно каштанового цвета |
|Sphinx  | не дозволялось обитать среди иудеев её менять чьи длинные локоны были нежного темно каштанового цвета |

|        | decoder-test.wav |
|--------|------------------|
|Оригинал| Илья Ильф Евгений Петров Золотой телёнок. |
|Google  | Илья Ильф Евгений Петров Золотой телёнок  |
|Sphinx  | илья ильф евгений петров и золотой телёнок|

|        | machine.wav duration=30 |
|--------|-------------------------------|
|Оригинал|                               |
|Google  | наши ребята в чате спрашиваю там по ушным нашим алматинским горам скучаешь или нет Я им сказал что тут таких гор много-много Скучаю конечно поедем посмотришь оптом ездила до места для лазания очень много искал Егор действительно и всё в такой же если не лучше доступности как у нас стена Северная и подняли на свадьбах вообще говорят он на высоте 1200 м он запрессовывают половинами за время зимы и потом он сохраняется в течение всего года линейка называется Золушка cenerentola потому что чёрный там по всяким мусором всяким ветками камушками красивые стенки Какие моря зимой её ходил без процентов первый и наверное единственное Нет не действует он впереди порно и она показалась да потом это вот это вот остренькая но мы на неё не полезен мы там Проверь Джина Карано пранкеров упрямстве разберёмся Сегодня мы горючего Вот она вообще не замыкает Да сегодня на всякий случай Взять ключи потому что непонятно вчера хотелось парень я скажу сейчас могу быть и поинтересней немножко так по применению или нет так как не скажет проход и скручивает Запусти ценность думаешь надо а здесь что хорошо что здесь везде кафешке везде стороны сейчас будем в канале деревню проезжать там ну компьютере открыта можем сейчас созвониться айфи кофе попьём Ну давай-давай задуматься уже напились ты кофеман Нет не напились мы еще кофе адрес дома Приветик Ты дома 2 3 выходи Так это ты половину кружку потом вторую я тебе напомню старую там короче пожалуйста киска друга Давай остановимся попьём кофе в кофейне Спасибо тут руды добывают железо медь Серебро вот сейчас будем как раз приезжать Санька Лес хороший строевой туризме достаточно развит почему вот эти кафешки функционирует можно просто люди приезжают и платят за сервис как ему получается допустим он кстати показал самой высокой в этой реке 2.500 город Чита она такая получается аналог нашего ущелью туюк-су только гораздо длиннее облагораживание кафе используя Ну да наверное до 30 км да или нет Вот едем в самом верху щенка который замыкает А всё равно что мы там куда-нибудь на манжероке завести в общем-то Да ну для меня это такое аналог ассоциация Медиков как раз 600 перепад она самая крутая наверное буду в этом массиве короче Легенда такая что Последний король Италии через этот перевал вот и через другие там перевалы уходил потом Швейцарию когда начались Республиканский всякие дела и той стороны эти горы пологие Ну так сравнительную там травянистые склоны о них лежит на вершине снега Сейчас снег вот там Ну сегодня я думал мои пнем пару раз это снежок |
|Sphinx  | наши ребята всякие вашего из бо в нужно нашему в деньгам спустя решили не ввязываться в такие вот много хорнада поганые или в ночи с зря вас не хватает гордости за боярин обхода сидящим видовой стены звериные морды до по идее да места для товара не очень много искала его в действительно ли все такой же если не с от доступности бурбонов и даже в о в н достигает тысячи метров над отверженная и поверьте пальцы в имени в и уже с ними в в в с в в приведены и потом он с заключение в вода в должности не то что чёрное там нет даже камушками здания к достаточно взглядъ валентин марево и мойого дивный в первый и наверное не дам в семидесятых годах зимой в н и в в в в в бургосе народу в мало ли вот видите горном я она показала на должны будут всегда небольших в траве можно пройти на накануне в св й в н к животным и взяла тогда она учителями в нами и в селяни що ваша непонятно тебя хотя и с места и все же да в гения выжидая кто прими в скале надо вот в дикой что он самый в брюссель бельгия берлин это не надо а не в многосложных к выяснили дидона не будем в и она или вне влияния там в я к тому же они упали два берём в в пайна от родного дома и избегали магния все мав не надеялись ничто из того девятьсот две трети джигитам третий передали во второй ньятенери не все в этом и даже до дружно запомни наливал в бранд бонд и сроки и в дрожал в его медее становится таким после почтальона и влезла в эту дыру д д марта ура железами на деле было бы взять хотя бы хороший ты мой или достаточно развитая теперь я не это ли в сбылось тут банку к назад мы с ли де пятьсот вот это нам и нашим змия в пользу не население да ведь это обвинение в в в едем в самое вернулись к ввода в но от примерно в это такое но в чем они стена он в с ленина что исчез в двери бар а сам обсуждая наверно в этом мире если приберегала для будущей жизни г в очереди в этот последний король италии джеда к перевалу подвести итоги и они бы и далее в когда в точности так и не соляной горы пологий травянистый оное было некогда взгляни две отделяли вверх они могли местной никона в среде войдя в ворота в стене напильник |
